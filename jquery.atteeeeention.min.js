/* Copyright 2011, Ben Lin (http://dreamerslab.com/)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 1.0.0
*
* Requires: jQuery 1.2.6+
*/
$.fn.atteeeeention=function(a){return this.each(function(){var m=$.extend({margin:12,hideLastRow:false},a),n=$(this),h=n.find("img"),g=m.margin,e=h.length,i=0,o=n.innerWidth(),p,j=[],f=0,c=1000,d=[],q=0,b=0,k=0,l=function(){var u=o-(f-p)+g,s=Math.floor(u/q),v=u-(s*q),t=0;$.each(j,function(y,z){var x=$(h[k]),w=x.parent();t=z+s;w.height(c);if(q===(y+1)){w.css("margin-right",0);x.width(t+v);}else{x.width(t);}k++;});},r=function(){var t=0,s=q;if(m.hideLastRow===true){for(;t<s;t++){$(h[k]).parent().hide();k++;}}else{for(;t<s;t++){$(h[k]).parent().height(c);k++;}}};n.addClass("clearfix");h.css({border:0,margin:0,padding:0}).parent().css({"float":"left",display:"inline","margin-top":0,"margin-right":g,"margin-bottom":g,"margin-left":0,overflow:"hidden","vertical-align":"top"});h.each(function(){var s=$(this),t=s.attr("src");s.attr("src","").load(function(){i++;if(i===e){h.each(function(w){var v=$(this),u=v.width(),x=v.height();p=u+g;f=f+p;if(x<c){c=x;}if(f>o){l();b++;f=p;c=x;j=[u];q=1;}else{j.push(u);q++;}if((e-1)===w){r();}});}}).attr("src",t);});});};