/* Copyright 2011, Ben Lin (http://dreamerslab.com/)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 1.0.2
*
* Requires: jQuery 1.2.6+
*/
(function(a){a.fn.atteeeeention=function(b){return this.each(function(){var k,l,f,e,d,g,m,n,h,c,o,i,j,p;k=a.extend({margin:12,hideLastRow:false},b);l=a(this);f=l.find("img");e=k.margin;d=f.length;g=0;m=l.innerWidth();h=[];rowWidth=0;c=1000;o=0;i=0;j=function(){var s,q,t,r;s=m-(rowWidth-n)+e;q=Math.floor(s/o);t=s-(q*o);r=0;a.each(h,function(w,x){var v,u;v=a(f[i]);u=v.parent();r=x+q;u.height(c);if(o===(w+1)){u.css("margin-right",0);v.width(r+t);}else{v.width(r);}i++;});};p=function(){var r,q;r=0;q=o;if(k.hideLastRow===true){for(;r<q;r++){a(f[i]).parent().hide();i++;}}else{for(;r<q;r++){a(f[i]).parent().height(c);i++;}}};l.addClass("clearfix");f.css({border:0,margin:0,padding:0}).parent().css({"float":"left",display:"inline","margin-top":0,"margin-right":e,"margin-bottom":e,"margin-left":0,overflow:"hidden","vertical-align":"top"});f.each(function(){var q,r;q=a(this);r=q.attr("src");q.attr("src","").load(function(){g++;g===d&&f.each(function(u){var t,s,v;t=a(this);s=t.width();v=t.height();n=s+e;rowWidth=rowWidth+n;if(v<c){c=v;}if(rowWidth>m){j();rowWidth=n;c=v;h=[s];o=1;}else{h.push(s);o++;}(d-1)===u&&p();});}).attr("src",r);});});};})(jQuery);